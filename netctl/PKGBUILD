# Maintainer: Jouke Witteveen <j.witteveen@gmail.com>

pkgname=netctl-fast-reauth
pkgver=1.4
pkgrel=2
pkgdesc='Profile based systemd network management'
url='http://projects.archlinux.org/netctl.git/'
license=('GPL')
groups=('base')
depends=('coreutils' 'iproute2' 'openresolv' 'systemd')
# The source tarball includes pre-built (using asciidoc) documentation.
makedepends=('pkg-config')
optdepends=('dialog: for the menu based wifi assistant'
            'dhclient: for DHCP support (or dhcpcd)'
            'dhcpcd: for DHCP support (or dhclient)'
            'wpa_supplicant: for wireless networking support'
            'ifplugd: for automatic wired connections through netctl-ifplugd'
            'wpa_actiond: for automatic wireless connections through netctl-auto'
            'ifenslave: for bond connections'
            'ppp: for pppoe connections'
           )
conflicts=('netctl', 'netctl-git')
source=(ftp://ftp.archlinux.org/other/packages/netctl/netctl-${pkgver}.tar.xz{,.sig}
0001-Fix-typo-in-detection-of-hex-keys.patch
fast-reauth.patch)
arch=('any')
md5sums=('825f07c432bff1de0254ab800f22cb61'
         'SKIP'
         '951b058a3c9879b77a2e0d211bb03111'
				 'SKIP')

 prepare() {
	cd "$srcdir/netctl-${pkgver}"
	patch -p1 -i "$srcdir/0001-Fix-typo-in-detection-of-hex-keys.patch"
	patch -p1 -i "$srcdir/fast-reauth.patch"
 }

package() {
	cd "$srcdir/netctl-${pkgver}"
	make DESTDIR="$pkgdir" install

	# Shell Completion
	install -D -m644 contrib/bash-completion "$pkgdir/usr/share/bash-completion/completions/netctl"
	install -D -m644 contrib/zsh-completion "$pkgdir/usr/share/zsh/site-functions/_netctl"
}

# vim: set noet:
